Jet().$package(function(a){var m=a.dom.id,n=a.event,s=a.http,u=window.open;window.open=function(b,c,d,j){if(c==undefined)c="_blank";if(d==undefined)d="";if(j==undefined)j=false;if(!u(b,c,d,j)){a.out("\u5929\u5566\uff01\u4f60\u7684\u673a\u5668\u4e0a\u7adf\u7136\u6709\u8f6f\u4ef6\u62e6\u622a\u5f39\u51fa\u7a97\u53e3\u8036~~~");return false}return true};a.config={debugLevel:1};a.console={print:function(b,c){if(a.console.log)a.console.log((c===4?new Date+":":"")+b)}};a.Report={receive:a.emptyFunc,addRule:a.emptyFunc};
a.extend(a.console,{_isCreated:false,_html:'<div id="ConsoleBoxHead" class="consoleBoxHead">\t\t\t\t\t\t<button id="ConsoleCloseButton" class="consoleCloseButton">x</button>\t\t\t\t\t\t<h5 class="title">Console</h5>\t\t\t\t\t</div>\t\t\t\t\t<ul id="ConsoleOutput" class="consoleOutput"></ul>\t\t\t\t\t<div class="consoleInputBox">\t\t\t\t\t\t&gt;<input id="ConsoleInput" class="consoleInput" />\t\t\t\t\t</div>',_opened:false,_log_record:[],TYPE:{DEBUG:0,ERROR:1,WARNING:2,INFO:3,PROFILE:4},_typeInfo:[["log_debug_type",
"\u221a"],["log_error_type","x"],["log_warning_type","!"],["log_info_type","i"],["log_profile_type","\u2514"]],show:function(){this._isCreated||this._create();this._opened=true;this._main.style.display="block";window.setTimeout(a.bind(this.focusCommandLine,this),0)},hide:function(){a.console._main.style.display="none";a.console._opened=false},enable:function(){a.option.console=true;this.show()},disable:function(){a.option.console=false;this.hide()},_init:function(){this.print=this.out;n.on(document,
"keydown",a.bind(this.handleDocumentKeydown,this));a.option.console&&this.show()},_create:function(){s.loadCss(a.path+"assets/jet.css");this._main=document.createElement("div");this._main.id="JetConsole";this._main.style.display="none";this._main.className="consoleBox";this._main.innerHTML=this._html;window.document.body.appendChild(this._main);this._headEl=m("ConsoleBoxHead");this._inputEl=m("ConsoleInput");this._closeButtonEl=m("ConsoleCloseButton");this._outputEl=m("ConsoleOutput");a.dragdrop&&
a.dragdrop.registerDragdropHandler(this._headEl,this._main);n.on(this._inputEl,"keypress",this._execScript);n.on(this._closeButtonEl,"click",this.hide);a.option.debug>a.DEBUG.NO_DEBUG?this.setToDebug():this.setToNoDebug();this._isCreated=true;this.out("Welcome to JET(Javascript Extension Tools)...",this.TYPE.INFO)},handleDocumentKeydown:function(b){switch(b.keyCode){case 192:if(b.ctrlKey){this.toggleShow();b.preventDefault()}break;default:break}},focusCommandLine:function(){this._inputEl.focus()},
toggleShow:function(){this._opened?this.hide():this.show()},outConsoleShow:function(b,c){this.outConsole(b,c);!this._opened&&a.option.console&&this.show()},outConsole:function(b,c){c=c||3;this.log(b,c);if(c<a.option.debug){var d=document.createElement("li");this._outputEl.appendChild(d);c=a.console._typeInfo[c]||a.console._typeInfo[0];d.className=c[0];d.innerHTML='<span class="log_icon">'+c[1]+"</span>"+b;this._outputEl.scrollTop=this._outputEl.scrollHeight}},out:function(){},setToDebug:function(){this.out=
this.outConsoleShow},setToNoDebug:function(){this.out=this.outConsole},log:function(b,c){this._log_record.push([b,c])},clear:function(){a.console._outputEl.innerHTML=""},_execScript:function(b){if(b.keyCode===13){switch(a.console._inputEl.value){case "help":b="&lt;&lt; Console Help &gt;&gt;<br/>\t\t\t\t\t\t\t\thelp  : \u63a7\u5236\u53f0\u5e2e\u52a9<br/>\t\t\t\t\t\t\t\tclear : \u6e05\u7a7a\u63a7\u5236\u53f0\u8f93\u51fa<br/>\t\t\t\t\t\t\t\thide  : \u9690\u85cf\u63a7\u5236\u53f0\uff0c\u6216\u8005\u4f7f\u7528 Ctrl + `(~) \u5feb\u6377\u952e";
a.console.out(b,3);break;case "clear":a.console.clear();break;case "hide":a.console.hide();break;default:b='<span style="color:#ccff00">'+a.console._inputEl.value+"</span><br/>";try{b+=(eval(a.console._inputEl.value)||"").toString().replace(/</g,"&lt;").replace(/>/g,"&gt;");a.console.out(b,0)}catch(c){b+=c.description;a.console.out(b,1)}}a.console._inputEl.value=""}}});var f=this,o=a.string.mapQuery(window.location.search);if(o.console)if(o.console=="firebug")if(f.console){f.console.out=function(b){f.console.log(b)};
a.console=f.console}else s.loadScript(a.path+"firebug/firebug-lite.js",{onSuccess:function(){firebug.env.height=220;firebug.env.css="../../source/firebug/firebug-lite.css";f.console.out=function(b){f.console.log(b)};a.console=f.console;a.out("...\u63a7\u5236\u53f0\u5f00\u542f");a.out("...\u6d4b\u8bd5\u6210\u529f")}});else o.console=="true"&&n.onDomReady(function(){a.console._init();a.console.show()});a.runtime=function(){function b(){return a.config.debugLevel>0}function c(k,p){var h;if(b())h=k+"\n=STACK=\n"+
q();else if(p=="error")h=k;a.Debug.errorLogs.push(h)}function d(){c(write.apply(null,arguments),"warn")}function j(){c(write.apply(null,arguments),"error")}function q(k,p){function h(e,i){if(e.stack)return e.stack;else if(e.message.indexOf("\nBacktrace:\n")>=0){var t=0;return e.message.split("\nBacktrace:\n")[1].replace(/\s*\n\s*/g,function(){t++;return t%2==0?"\n":" @ "})}else{e=i.callee==q?i.callee.caller:i.callee;var g=e.arguments;i=[];for(var l=0,v=g.length;l<v;l++)i.push(typeof g[l]=="undefined"?
"<u>":g[l]===null?"<n>":g[l]);g=/function\s+([^\s\(]+)\(/;return((g.test(e.toString())?g.exec(e.toString())[1]:"<ANON>")+"("+i.join()+");").replace(/\n/g,"")}}var r;if(k instanceof Error&&typeof arguments=="object"&&arguments.callee)r=h(k,p);else try{({}).sds()}catch(w){r=h(w,arguments)}return r.replace(/\n/g," <= ")}return{stack:q,warn:d,error:j,isDebugMode:b}}()});
