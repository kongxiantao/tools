Jet().$package(function(h){var A=h.dom.id,u=h.dom,x=h.event,l;if(typeof window.XMLHttpRequest==="undefined")window.XMLHttpRequest=function(){return new window.ActiveXObject(navigator.userAgent.indexOf("MSIE 5")>=0?"Microsoft.XMLHTTP":"Msxml2.XMLHTTP")};h.http=h.http||{};l=function(d,a,b){var f,k,o,g,e=document.getElementsByTagName("head")?document.getElementsByTagName("head")[0]:document.documentElement,j,p=false,q=false;b=b||{};k=b.query||null;var s=b.arguments||null,v=b.onSuccess||function(){},
B=b.onError||function(){},r=b.onComplete||function(){},m,C=b.onTimeout||function(){},t=b.timeout?b.timeout:1E4,y=b.charset?b.charset:"utf-8",z=b.win||window,n;a=a||"";if(k!==null)a=a+"?"+k;g=function(){return l.Id++}();m=function(c){e.removeChild(A("jet_load_"+c))};k=function(c,i,w){return u.node("link",{id:"jet_load_"+g,type:"text/css",charset:w||"utf-8",rel:"stylesheet",href:c},i)};o=function(c,i,w){return u.node("script",{id:"jet_load_"+g,defer:"defer",type:"text/javascript",charset:w||"utf-8",
src:c},i)};if(d==="script")f=b.node||o(a,z,y);else if(d==="css")f=b.node||k(a,z,y);if(h.browser.engine.trident)f.onreadystatechange=function(){var c=this.readyState;if(c==="loaded"||c==="complete"){f.onreadystatechange=null;if(!p){q=true;window.clearTimeout(j);j=null;n={};n.id=g;n.uri=a;n.arguments=s;v(n);r(n);d==="script"&&m(g)}}};else if(h.browser.engine.webkit)x.on(f,"load",function(){var c;if(!p){q=true;window.clearTimeout(j);j=null;c={};c.id=g;c.uri=a;c.arguments=s;v(c);r(c);d==="script"&&m(g)}});
else{f.onload=function(){var c;if(!p){q=true;window.clearTimeout(j);j=null;c={};c.id=g;c.uri=a;c.arguments=b.arguments;v(c);r(c);d==="script"&&m(g)}};f.onerror=function(c){var i;if(!p){q=true;window.clearTimeout(j);j=null;i={};i.id=g;i.uri=a;i.arguments=s;i.error=c;B(i);r(i);m(g)}}}if(b.node)if(d==="script")f.src=a;else{if(d==="css")f.href=a}else e.appendChild(f);if(d==="script")j=window.setTimeout(function(){var c;if(!q){p=true;c={};c.uri=a;c.arguments=s;C(c);r(c);m(g)}},t);t=function(c){this._node=
c;this._head=e};t.prototype={abort:function(){this._node.src="";this._head.removeChild(this._node);delete this._node}};return new t(f)};l.Id=0;h.http.ajax=function(d,a){var b,f,k,o=false,g=false;a={method:a.method||"GET",data:a.data||null,arguments:a.arguments||null,onSuccess:a.onSuccess||function(){},onError:a.onError||function(){},onComplete:a.onComplete||function(){},onTimeout:a.onTimeout||function(){},isAsync:a.isAsync||true,timeout:a.timeout?a.timeout:1E4,contentType:a.contentType?a.contentType:
"utf-8",type:a.type||"xml"};d=d||"";k=a.timeout;b=new window.XMLHttpRequest;b.open(a.method,d,a.isAsync);b.setRequestHeader("Content-Type",a.contentType);f=function(e){try{return!e.status&&location.protocol=="file:"||e.status>=200&&e.status<300||e.status==304||navigator.userAgent.indexOf("Safari")>-1&&typeof e.status=="undefined"}catch(j){}return false};b.onreadystatechange=function(){if(b.readyState==4){if(!o){var e={};e.responseText=b.responseText;e.responseXML=b.responseXML;e.uri=d;e.arguments=
a.arguments;if(f(b)){a.type==="script"&&eval.call(window,data);a.onSuccess(e)}else a.onError(e);a.onComplete(e)}g=true;b=null}};b.send(a.data);window.setTimeout(function(){var e;if(!g){o=true;e={};e.uri=d;e.arguments=a.arguments;a.onTimeout(e);a.onComplete(e)}},k);return b};h.http.comet=function(d,a){d=d||"";a={method:a.method||"GET",data:a.data||null,arguments:a.arguments||null,callback:a.callback||function(){},onLoad:a.onLoad||function(){},contentType:a.contentType?a.contentType:"utf-8"};var b;
if(h.browser.ie){b=new ActiveXObject("htmlfile");b.open();b.close();var f=b.createElement("div");b.appendChild(f);b.parentWindow._parent=self;f.innerHTML='<iframe id="_cometIframe" src="'+d+"?callback=window.parent._parent."+a.callback+'"></iframe>';b=b.getElementById("_cometIframe")}else{b=u.node("iframe");b.setAttribute("id","_cometIframe");b.setAttribute("src",d+"?callback=window.parent._parent."+a.callback);b.style.position="absolute";b.style.visibility="hidden";b.style.left=b.style.top="-999px";
b.style.width=b.style.height="1px";document.body.appendChild(b);self._parent=self}x.on(b,"load",a.onLoad);return b};h.http.load=l;h.http.loadCss=function(d,a){return l("css",d,a)};h.http.loadScript=function(d,a){return l("script",d,a)}});
